import{x as m,h as F,_ as be,c as d,o as u,j as a,d as De,p as Ve,s as $e,e as W,J as b,O as Se,k as l,t as M,G as A,H as P,n as E,a as k,I as _e,ah as he,w as R}from"./chunks/framework.CMpBhb2-.js";import{u as Ce}from"./chunks/useStyleComputed.C3Tfj8Jd.js";function Me(r,p){const f=m(!1),h=m(new Date().getFullYear()),V=m(new Date().getMonth()),w=m(new Date().getFullYear()),B=m(new Date().getMonth()),g=m(null),y=m(null),C=m(!0),s=m(null),$=m(null),c=m(null),I=m(null),z=m(null),H=m(null),j=m(!1),J=m(!1),X=m(!1),Z=["日","一","二","三","四","五","六"],ee=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],D=F(()=>r.range&&r.year?"range-year":r.range&&r.month?"range-month":r.range?"range-date":r.year?"year":r.month?"month":"date"),le=F(()=>({date:"请选择日期",year:"请选择年份",month:"请选择月份","range-date":"请选择日期范围","range-month":"请选择月份范围","range-year":"请选择年份范围"})[D.value]),U=F(()=>D.value==="date"?`${h.value}年 ${V.value+1}月`:`${h.value}年`),G=F(()=>{const t=h.value-Math.floor(7.5);return Array.from({length:15},(i,o)=>t+o)}),te=F(()=>{if(!["date","range-date"].includes(D.value))return[];const e=new Date(h.value,V.value,1);e.setHours(0,0,0,0);const t=new Date(h.value,V.value+1,0);t.setHours(0,0,0,0);const i=[];for(let o=0;o<e.getDay();o++)i.push({key:`prev-${o}`,date:null,isCurrentMonth:!1});for(let o=1;o<=t.getDate();o++){const _=new Date(h.value,V.value,o);_.setHours(0,0,0,0),i.push({key:`curr-${o}`,date:_,isCurrentMonth:!0})}for(let o=i.length;o<42;o++)i.push({key:`next-${o}`,date:null,isCurrentMonth:!1});return i}),T=F(()=>{if(D.value==="range-year"){if(g.value&&y.value){const e=g.value.getFullYear(),t=y.value.getFullYear();return`${e}年 至 ${t}年`}return""}if(D.value==="year"){if(typeof r.modelValue=="string"&&r.modelValue){const[e]=r.modelValue.split("-");return`${e}年`}return""}if(!r.range&&typeof r.modelValue=="string"){const[e,t,i]=r.modelValue.split("-");return e&&t&&i?r.month?`${e}年${t}月`:`${e}年${t}月${i}日`:""}if(r.range&&Array.isArray(r.modelValue)){const[e,t]=r.modelValue;if(typeof e=="string"&&typeof t=="string"&&e&&t){const[i,o,_]=e.split("-"),[Q,L,ce]=t.split("-");if(i&&o&&_&&Q&&L&&ce)return r.month?`${i}年${o}月 至 ${Q}年${L}月`:`${i}年${o}月${_}日 至 ${Q}年${L}月${ce}日`}return""}return""}),Y=F(()=>{if(r.range){const e=c.value!=null&&I.value!=null?`${String(c.value).padStart(2,"0")}:${String(I.value).padStart(2,"0")}`:"",t=z.value!=null&&H.value!=null?`${String(z.value).padStart(2,"0")}:${String(H.value).padStart(2,"0")}`:"";return e&&t?`${e} - ${t}`:""}return s.value==null||$.value==null?"":`${String(s.value).padStart(2,"0")}:${String($.value).padStart(2,"0")}`}),se=F(()=>{if(D.value==="range-year"||D.value==="year"||!r.time)return T.value;if(r.range){const[e,t]=Y.value.split(" - ");return e&&t?`${T.value} ${e} 至 ${t}`:T.value}return Y.value?`${T.value} ${Y.value}`:T.value});function ie(){f.value=!f.value,f.value&&q()}function q(){if(r.modelValue){if(r.time){if(r.range&&Array.isArray(r.modelValue)){const[e,t]=r.modelValue;if(typeof e=="string"&&e.includes(" ")){const[i]=e.split(" "),[o,_]=i.split(":").map(Number);c.value=o,I.value=_,J.value=!0}if(typeof t=="string"&&t.includes(" ")){const[i]=t.split(" "),[o,_]=i.split(":").map(Number);z.value=o,H.value=_,X.value=!0}}else if(typeof r.modelValue=="string"&&r.modelValue.includes(" ")){const[e]=r.modelValue.split(" "),[t,i]=e.split(":").map(Number);s.value=t,$.value=i,j.value=!0}}if(r.range&&Array.isArray(r.modelValue)){const[e,t]=r.modelValue;if(typeof e=="string"){const[i,o,_]=e.split("-").map(Number);g.value=new Date(i,o-1,_),h.value=i,V.value=o-1}if(typeof t=="string"){const[i,o,_]=t.split("-").map(Number);y.value=new Date(i,o-1,_)}}else if(typeof r.modelValue=="string"){const[e,t,i]=r.modelValue.split("-").map(Number);e&&t&&i&&(w.value=e,B.value=t-1,h.value=e,V.value=t-1)}}}function O(e){const t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${t}-${i}-${o}`}function x(e,t,i){const o=O(e);if(!r.time)return o;const[_,Q]=Y.value.split(" - "),L=t?i?_:Q:Y.value;return L?`${o} ${L}`:o}function re(e){const t=x(e,!1,!1);p("update:modelValue",t),p("change",t),f.value=!1}function ae(e){if(C.value)g.value=e,C.value=!1,p("update:modelValue",[x(e,!0,!0)]);else{y.value=e;const t=x(g.value,!0,!0),i=x(e,!0,!1);p("update:modelValue",[t,i]),p("change",[t,i]),f.value=!1,C.value=!0}}function oe(e){const t=new Date(h.value,e,1),i=x(t,!1,!1);p("update:modelValue",i),p("change",i),f.value=!1}function de(e){const t=new Date(h.value,e,1);if(C.value)g.value=t,C.value=!1,p("update:modelValue",[x(t,!0,!0)]);else{y.value=t;const i=x(g.value,!0,!0),o=x(t,!0,!1);p("update:modelValue",[i,o]),p("change",[i,o]),f.value=!1,C.value=!0}}function K(e){if(D.value==="year"){const t=`${e.toString().padStart(4,"0")}-01-01`;p("update:modelValue",t),p("change",t),f.value=!1,w.value=e,h.value=e;return}}function ne(e){if(D.value!=="range-year")return K(e);if(C.value)g.value=new Date(e,0,1),p("update:modelValue",[`${e}-01-01`]),w.value=e,C.value=!1;else{y.value=new Date(e,0,1);const t=g.value.getFullYear(),i=y.value.getFullYear(),o=[`${t}-01-01`,`${i}-01-01`];p("update:modelValue",o),p("change",o),f.value=!1,C.value=!0,h.value=i}}function v(e){let t=V.value+e,i=h.value;t<0&&(t=11,i--),t>11&&(t=0,i++),V.value=t,h.value=i}function n(e){h.value+=e}function S(){D.value.includes("year")?n(-G.value.length):D.value.includes("month")?n(-1):v(-1)}function ue(){D.value.includes("year")?n(G.value.length):D.value.includes("month")?n(1):v(1)}function me(e){if(r.range||typeof r.modelValue!="string")return!1;const[t,i,o]=r.modelValue.split("-").map(Number);return e.getFullYear()===t&&e.getMonth()+1===i&&e.getDate()===o}function pe(e){if(!g.value||!y.value)return!1;const t=e.getTime();return t>=g.value.getTime()&&t<=y.value.getTime()}function ge(e){if(!g.value||!y.value)return!1;const t=new Date(h.value,e,1).getTime(),i=new Date(h.value,e+1,0).getTime();return t<=y.value.getTime()&&i>=g.value.getTime()}function ve(e){return!g.value||!y.value?!1:e>=g.value.getFullYear()&&e<=y.value.getFullYear()}function ke(e){const t=new Date;return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}function fe(e){const t=new Date;return h.value===t.getFullYear()&&e===t.getMonth()}function ye(e){return e===new Date().getFullYear()}return{showDropdown:f,formattedDateTime:se,placeholderText:le,toggleDropdown:ie,daysOfWeek:Z,months:ee,calendarCells:te,mode:D,headerLabel:U,fullYearRange:G,selectedTime:Y,currentYear:h,currentMonth:V,selectedYear:w,selectedMonth:B,selectedHour:s,selectedMinute:$,selectedHourStart:c,selectedMinuteStart:I,selectedHourEnd:z,selectedMinuteEnd:H,timeSelected:j,timeSelectedStart:J,timeSelectedEnd:X,selectDate:re,selectRangeDate:ae,selectMonth:oe,selectRangeMonth:de,selectYear:K,selectRangeYear:ne,changeMonth:v,changeYear:n,onPrev:S,onNext:ue,isSelected:me,isInRange:pe,isInRangeMonth:ge,isInRangeYear:ve,isToday:ke,isCurrentMonth:fe,isCurrentYear:ye,initFromModelValue:q}}const we={modelValue:{type:[String,Array],default:""},type:{type:String,default:"date"},disabled:{type:Boolean,default:!1},year:{type:Boolean,default:!1},month:{type:Boolean,default:!1},range:{type:Boolean,default:!1},time:{type:Boolean,default:!1},showToday:{type:Boolean,default:!0},width:{type:[String,Number],default:"260px"},height:{type:[String,Number],default:"20px"}},xe={name:"DateRangeIcon"},Ye={width:"40px",height:"40px",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Ae(r,p,f,h,V,w){return u(),d("svg",Ye,[...p[0]||(p[0]=[a("path",{d:"M20 10V7C20 5.89543 19.1046 5 18 5H6C4.89543 5 4 5.89543 4 7V10M20 10V19C20 20.1046 19.1046 21 18 21H6C4.89543 21 4 20.1046 4 19V10M20 10H4M8 3V7M16 3V7",stroke:"#000000","stroke-width":"2","stroke-linecap":"round"},null,-1),a("rect",{x:"6",y:"12",width:"3",height:"3",rx:"0.5",fill:"#000000"},null,-1),a("rect",{x:"10.5",y:"12",width:"3",height:"3",rx:"0.5",fill:"#000000"},null,-1),a("rect",{x:"15",y:"12",width:"3",height:"3",rx:"0.5",fill:"#000000"},null,-1)])])}const Be=be(xe,[["render",Ae]]),Te={class:"date-picker-container"},Fe={class:"input-container"},Pe=["value","placeholder"],Re={key:0,class:"date-picker-dropdown"},Ne={key:0,class:"time-picker-container"},Ee={key:1,class:"range-container"},Ie={class:"picker-header"},ze=["onClick"],He={key:0,class:"today-badge"},Ue=["onClick"],Oe=["onClick"],Le={key:2,class:"year-picker"},We={class:"picker-header"},je={class:"year-grid grid-year month-cell"},Je=["onClick"],Ge={key:3,class:"month-picker"},qe={class:"picker-header"},Ke={class:"month-grid grid-month month-cell"},Qe=["onClick"],Xe={key:4,class:"date-picker-default"},Ze={class:"picker-header"},et={class:"date-grid grid-date"},tt=["disabled","onClick"],at={key:0,class:"today-badge"},N=De({__name:"selectDate",props:we,emits:["update:modelValue","change"],setup(r,{emit:p}){const f=r,h=p,V=Ce(f,{propToStyleMap:{width:"width",height:"height"}}),{showDropdown:w,toggleDropdown:B,currentYear:g,currentMonth:y,fullYearRange:C,formattedDateTime:s,placeholderText:$,mode:c,selectYear:I,selectMonth:z,selectDate:H,onPrev:j,onNext:J,headerLabel:X,daysOfWeek:Z,calendarCells:ee,isInRange:D,selectRangeDate:le,isToday:U,isInRangeMonth:G,isCurrentMonth:te,selectRangeYear:T,months:Y,selectRangeMonth:se,isInRangeYear:ie,isCurrentYear:q,changeYear:O,selectedYear:x,selectedMonth:re,changeMonth:ae,isSelected:oe,initFromModelValue:de}=Me(f,h);function K(ne){ne.target.closest(".date-picker-container")||(w.value=!1)}return Ve(()=>{document.addEventListener("click",K),de()}),$e(()=>{document.removeEventListener("click",K)}),(ne,v)=>(u(),d("div",Te,[a("div",Fe,[a("input",{value:l(s),class:"my-selectDate",placeholder:l($),readonly:"",onClick:v[0]||(v[0]=(...n)=>l(B)&&l(B)(...n)),style:Se(l(V))},null,12,Pe),b(Be,{class:"date-range-icon"})]),l(w)?(u(),d("div",Re,[f.time?(u(),d("div",Ne)):W("",!0),l(c).startsWith("range")?(u(),d("div",Ee,[a("div",Ie,[a("button",{type:"button",class:"nav-button",onClick:v[1]||(v[1]=(...n)=>l(j)&&l(j)(...n))},"◄"),a("span",null,M(l(X)),1),a("button",{type:"button",class:"nav-button",onClick:v[2]||(v[2]=(...n)=>l(J)&&l(J)(...n))},"►")]),a("div",{class:E(["range-grid",{"grid-date":l(c)==="range-date","grid-month":l(c)==="range-month","grid-year":l(c)==="range-year"}])},[l(c)==="range-date"?(u(),d(A,{key:0},[(u(!0),d(A,null,P(l(Z),n=>(u(),d("div",{key:n,class:"day-header"},M(n),1))),128)),(u(!0),d(A,null,P(l(ee),n=>(u(),d("div",{key:n.key,class:"day-cell"},[n.date?(u(),d("button",{key:0,type:"button",class:E({"in-range":l(D)(n.date),today:l(U)(n.date)}),onClick:S=>l(le)(n.date)},[k(M(n.date.getDate())+" ",1),l(U)(n.date)?(u(),d("span",He,"今")):W("",!0)],10,ze)):W("",!0)]))),128))],64)):l(c)==="range-month"?(u(!0),d(A,{key:1},P(l(Y),(n,S)=>(u(),d("div",{key:S,class:"month-cell"},[a("button",{type:"button",class:E({"in-range":l(G)(S),current:l(te)(S)}),onClick:ue=>l(se)(S)},M(n),11,Ue)]))),128)):(u(!0),d(A,{key:2},P(l(C),n=>(u(),d("div",{key:n,class:"year-cell"},[a("button",{type:"button",class:E({"in-range":l(ie)(n),current:l(q)(n)}),onClick:S=>l(T)(n)},M(n),11,Oe)]))),128))],2)])):l(c)==="year"?(u(),d("div",Le,[a("div",We,[a("button",{type:"button",class:"nav-button",onClick:v[3]||(v[3]=n=>l(O)(-1))},"◄"),a("span",null,M(l(g))+"年",1),a("button",{type:"button",class:"nav-button",onClick:v[4]||(v[4]=n=>l(O)(1))},"►")]),a("div",je,[(u(!0),d(A,null,P(l(C),n=>(u(),d("button",{type:"button",key:n,class:E({selected:n===l(x),current:l(q)(n)}),onClick:S=>l(I)(n)},M(n),11,Je))),128))])])):l(c)==="month"?(u(),d("div",Ge,[a("div",qe,[a("button",{type:"button",class:"nav-button",onClick:v[5]||(v[5]=n=>l(O)(-1))},"◄"),a("span",null,M(l(g))+"年",1),a("button",{type:"button",class:"nav-button",onClick:v[6]||(v[6]=n=>l(O)(1))},"►")]),a("div",Ke,[(u(!0),d(A,null,P(l(Y),(n,S)=>(u(),d("button",{type:"button",key:S,class:E({selected:S===l(re),current:l(te)(S)}),onClick:ue=>l(z)(S)},M(n),11,Qe))),128))])])):(u(),d("div",Xe,[a("div",Ze,[a("button",{type:"button",class:"nav-button",onClick:v[7]||(v[7]=n=>l(ae)(-1))},"◄"),a("span",null,M(l(g))+"年 "+M(l(y)+1)+"月",1),a("button",{type:"button",class:"nav-button",onClick:v[8]||(v[8]=n=>l(ae)(1))},"►")]),a("div",et,[(u(!0),d(A,null,P(l(Z),n=>(u(),d("div",{key:n,class:"day-header"},M(n),1))),128)),(u(!0),d(A,null,P(l(ee),n=>(u(),d("div",{key:n.key,class:"day-cell"},[n.date?(u(),d("button",{key:0,type:"button",class:E({selected:l(oe)(n.date),disabled:!n.isCurrentMonth,today:l(U)(n.date)}),disabled:!n.isCurrentMonth,onClick:S=>l(H)(n.date)},[k(M(n.date.getDate())+" ",1),l(U)(n.date)?(u(),d("span",at,"今")):W("",!0)],10,tt)):W("",!0)]))),128))])]))])):W("",!0)]))}}),nt={style:{position:"relative","z-index":"1000"}},lt={style:{position:"relative","z-index":"1000"}},st={style:{position:"relative","z-index":"1000"}},it={style:{position:"relative","z-index":"1000"}},rt={style:{position:"relative","z-index":"1000"}},ot={style:{position:"relative","z-index":"1000"}},dt={style:{position:"relative","z-index":"1000","min-height":"300px"}},ut={style:{position:"relative","z-index":"1000","min-height":"300px"}},pt=JSON.parse('{"title":"SelectDate","description":"","frontmatter":{},"headers":[],"relativePath":"components/FormSelectDate.md","filePath":"components/FormSelectDate.md"}'),ct={name:"components/FormSelectDate.md"},gt=Object.assign(ct,{setup(r){const p=m(""),f=m([]),h=m(""),V=m([]),w=m(""),B=m([]),g=m(""),y=m([]);return(C,s)=>{const $=_e("ShowCode");return u(),d("div",null,[s[8]||(s[8]=he("",5)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='singleDate' />
</template>
  `.trim()},{demo:R(()=>[a("div",nt,[b(N,{modelValue:p.value,"onUpdate:modelValue":s[0]||(s[0]=c=>p.value=c)},null,8,["modelValue"])])]),_:1},8,["code"]),s[9]||(s[9]=a("h2",{id:"选择日期范围",tabindex:"-1"},[k("选择日期范围 "),a("a",{class:"header-anchor",href:"#选择日期范围","aria-label":"Permalink to “选择日期范围”"},"​")],-1)),s[10]||(s[10]=a("p",null,[k("使用"),a("code",null,"range"),k("属性可以启用日期范围选择模式。")],-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='dateRange' range />
</template>
  `.trim()},{demo:R(()=>[a("div",lt,[b(N,{modelValue:f.value,"onUpdate:modelValue":s[1]||(s[1]=c=>f.value=c),range:""},null,8,["modelValue"])])]),_:1},8,["code"]),s[11]||(s[11]=a("h2",{id:"单月选择器",tabindex:"-1"},[k("单月选择器 "),a("a",{class:"header-anchor",href:"#单月选择器","aria-label":"Permalink to “单月选择器”"},"​")],-1)),s[12]||(s[12]=a("p",null,[k("使用"),a("code",null,"month"),k("属性可以只选择月份。")],-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='singleMonth' month />
</template>
  `.trim()},{demo:R(()=>[a("div",st,[b(N,{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=c=>h.value=c),month:""},null,8,["modelValue"])])]),_:1},8,["code"]),s[13]||(s[13]=a("h2",{id:"月份范围选择器",tabindex:"-1"},[k("月份范围选择器 "),a("a",{class:"header-anchor",href:"#月份范围选择器","aria-label":"Permalink to “月份范围选择器”"},"​")],-1)),s[14]||(s[14]=a("p",null,[k("使用"),a("code",null,"range"),k("属性可以启用月份范围选择模式。")],-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='monthRange' range month />
</template>
  `.trim()},{demo:R(()=>[a("div",it,[b(N,{modelValue:V.value,"onUpdate:modelValue":s[3]||(s[3]=c=>V.value=c),range:"",month:""},null,8,["modelValue"])])]),_:1},8,["code"]),s[15]||(s[15]=a("h2",{id:"年份选择器",tabindex:"-1"},[k("年份选择器 "),a("a",{class:"header-anchor",href:"#年份选择器","aria-label":"Permalink to “年份选择器”"},"​")],-1)),s[16]||(s[16]=a("p",null,[k("使用"),a("code",null,"year"),k("属性可以只选择年份。")],-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='singleYear' year />
</template>
  `.trim()},{demo:R(()=>[a("div",rt,[b(N,{modelValue:w.value,"onUpdate:modelValue":s[4]||(s[4]=c=>w.value=c),year:""},null,8,["modelValue"])])]),_:1},8,["code"]),s[17]||(s[17]=a("h2",{id:"年份范围选择器",tabindex:"-1"},[k("年份范围选择器 "),a("a",{class:"header-anchor",href:"#年份范围选择器","aria-label":"Permalink to “年份范围选择器”"},"​")],-1)),s[18]||(s[18]=a("p",null,[k("使用"),a("code",null,"range"),k("属性可以启用年份范围选择模式。")],-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='yearRange' year range />
</template>
  `.trim()},{demo:R(()=>[a("div",ot,[b(N,{modelValue:B.value,"onUpdate:modelValue":s[5]||(s[5]=c=>B.value=c),year:"",range:""},null,8,["modelValue"])])]),_:1},8,["code"]),s[19]||(s[19]=a("h2",{id:"时间选择器",tabindex:"-1"},[k("时间选择器 "),a("a",{class:"header-anchor",href:"#时间选择器","aria-label":"Permalink to “时间选择器”"},"​")],-1)),s[20]||(s[20]=a("p",null,[k("使用"),a("code",null,"time"),k("属性可以启用时间选择。")],-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date v-model='datetime' time />
</template>
  `.trim()},{demo:R(()=>[a("div",dt,[b(N,{modelValue:g.value,"onUpdate:modelValue":s[6]||(s[6]=c=>g.value=c),time:""},null,8,["modelValue"])])]),_:1},8,["code"]),s[21]||(s[21]=a("h2",{id:"组合使用",tabindex:"-1"},[k("组合使用 "),a("a",{class:"header-anchor",href:"#组合使用","aria-label":"Permalink to “组合使用”"},"​")],-1)),s[22]||(s[22]=a("p",null,"最后，实现个多种api组合使用实现个日期时间范围选择器：",-1)),b($,{title:"代码演示",code:`
<template>
    <MYSelect-date 
        v-model='datetimeRange' 
        range 
        time 
        placeholder='选择日期时间范围'
    />
</template>
  `.trim()},{demo:R(()=>[a("div",ut,[b(N,{modelValue:y.value,"onUpdate:modelValue":s[7]||(s[7]=c=>y.value=c),range:"",time:"",placeholder:"选择日期时间范围"},null,8,["modelValue"])])]),_:1},8,["code"]),s[23]||(s[23]=he("",5))])}}});export{pt as __pageData,gt as default};
