import{d as I,x as _,p as C,R as v,z as k,c as P,o as S,a1 as x,ai as A,j as T,I as f,ah as b,J as m,w as y}from"./chunks/framework.BWIYv-lY.js";import{u as E}from"./chunks/useColorUtils.OM-kkZVO.js";const N={class:"color-picker"},w=I({__name:"pickColor",props:{modelValue:{type:String,default:"#409EFF"},rgba:{type:[String,Number],default:1}},emits:["update:modelValue","change"],setup(u,{emit:c}){const l=u,s=c,r=_(l.modelValue);C(async()=>{await v(),requestAnimationFrame(()=>{try{let t=l.modelValue;if(!t||t==="#409EFF"){const a=localStorage.getItem("layout-setting");if(a){const o=JSON.parse(a);o.theme&&(t=o.theme)}}r.value=t,p(t)}catch(t){console.error("Failed to load theme from localStorage",t)}})}),k(()=>l.modelValue,t=>{t!==r.value&&(r.value=t)}),k(r,t=>{s("update:modelValue",t),s("change",t),p(t)},{immediate:!0});function p(t){if(!t)return;const{r:a,g:o,b:i,a:n}=V(t),e=`rgba(${a}, ${o}, ${i}, ${n})`;document.documentElement.style.setProperty("--app-primary-color",e),document.documentElement.style.setProperty("--el-color-primary",e),document.documentElement.style.setProperty("--myswitch-active",e);const F=.299*a+.587*o+.114*i>186?"#000":"#fff";document.documentElement.style.setProperty("--on-primary-text",F);try{let d={};const g=localStorage.getItem("layout-setting");g&&(d=JSON.parse(g)),Object.assign(d,{theme:t}),localStorage.setItem("layout-setting",JSON.stringify(d))}catch(d){console.error("Failed to save theme to localStorage",d)}}function h(){}function V(t){let a=64,o=158,i=255,n=1;if(/^#([0-9a-fA-F]{3,8})$/.test(t)){let e=t.replace("#","");e.length===3&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length>=6&&(a=parseInt(e.slice(0,2),16),o=parseInt(e.slice(2,4),16),i=parseInt(e.slice(4,6),16)),e.length===8?n=parseInt(e.slice(6,8),16)/255:n=parseFloat(String(l.rgba))||1}else{const e=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)/);e&&(a=parseInt(e[1]),o=parseInt(e[2]),i=parseInt(e[3]),n=e[4]?parseFloat(e[4]):parseFloat(String(l.rgba))||1)}return{r:a,g:o,b:i,a:n}}return(t,a)=>(S(),P("div",N,[x(T("input",{type:"color","onUpdate:modelValue":a[0]||(a[0]=o=>r.value=o),onInput:h},null,544),[[A,r.value]])]))}}),$=JSON.parse('{"title":"PickColor","description":"","frontmatter":{},"headers":[],"relativePath":"components/FormPickColor.md","filePath":"components/FormPickColor.md"}'),B={name:"components/FormPickColor.md"},J=Object.assign(B,{setup(u){const c=_("#409EFF");return C(()=>{const{applyGlobalColor:l}=E();l(c.value,"--global-primary-color")}),(l,s)=>{const r=f("ClientOnly"),p=f("ShowCode");return S(),P("div",null,[s[1]||(s[1]=b("",5)),m(p,{title:"代码演示",code:`
<template>
    <MYSelect-color v-model='colorValue' />
</template>
  `.trim()},{demo:y(()=>[m(r,null,{default:y(()=>[m(w,{modelValue:c.value,"onUpdate:modelValue":s[0]||(s[0]=h=>c.value=h)},null,8,["modelValue"])]),_:1})]),_:1},8,["code"]),s[2]||(s[2]=b("",5))])}}});export{$ as __pageData,J as default};
