import{_ as i,c as a,o as n,ah as t}from"./chunks/framework.D3tsReks.js";const g=JSON.parse('{"title":"Date和Time工具类","description":"","frontmatter":{},"headers":[],"relativePath":"design/utils/date.md","filePath":"design/utils/date.md"}'),e={name:"design/utils/date.md"};function h(l,s,k,p,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="date和time工具类" tabindex="-1">Date和Time工具类 <a class="header-anchor" href="#date和time工具类" aria-label="Permalink to “Date和Time工具类”">​</a></h1><h3 id="date-time-iso-格式转换与渲染工具函数" tabindex="-1">Date &amp; Time ISO 格式转换与渲染工具函数 <a class="header-anchor" href="#date-time-iso-格式转换与渲染工具函数" aria-label="Permalink to “Date &amp; Time ISO 格式转换与渲染工具函数”">​</a></h3><h2 id="痛点来源" tabindex="-1">痛点来源 <a class="header-anchor" href="#痛点来源" aria-label="Permalink to “痛点来源”">​</a></h2><p>在实际项目中，日期与时间的存储、传输与展示常常使用不同格式，导致大量重复且易出错的转换代码散落在各处：</p><ul><li>后端通常返回或要求 ISO 日期（如 <code>&quot;2025-12-19&quot;</code>）与时间字符串（如 <code>&quot;14:30&quot;</code>）</li><li>前端展示需要中文日期（如 “2025年12月19日”）与时间（如 “14:30”）</li><li>年份范围、仅年份、仅年月、时间解析等变体需求频繁出现</li><li>直接操作字符串容易出现补零遗漏、类型判断缺失、NaN 传播、格式不统一等问题</li><li>不同组件（如 DatePicker、TimePicker、Timeline、Card 元信息）对日期时间渲染规则不一致，视觉体验参差</li></ul><p>若每个组件或页面都自行拼接与解析，不仅代码冗余，还极易引入格式错误或国际化障碍。</p><h2 id="设计目标" tabindex="-1">设计目标 <a class="header-anchor" href="#设计目标" aria-label="Permalink to “设计目标”">​</a></h2><p>这组工具函数旨在<strong>统一所有日期与时间的 ISO/标准格式 ↔ 显示格式转换逻辑</strong>，提供一套简洁、安全、语义明确的日期时间处理方案，让组件与业务代码只需关心“使用日期时间”，而无需关心“如何格式化与解析”。</p><h2 id="核心工具函数" tabindex="-1">核心工具函数 <a class="header-anchor" href="#核心工具函数" aria-label="Permalink to “核心工具函数”">​</a></h2><table tabindex="0"><thead><tr><th>函数</th><th>职责</th><th>返回值/特性</th></tr></thead><tbody><tr><td><strong>toISOYear</strong></td><td>根据年份生成当年第一天的 ISO 字符串</td><td><code>&quot;YYYY-01-01&quot;</code></td></tr><tr><td><strong>toISOYMD</strong></td><td>根据年月日生成完整 ISO 日期字符串</td><td><code>&quot;YYYY-MM-DD&quot;</code>，自动补零</td></tr><tr><td><strong>isoToYMD</strong></td><td>将 ISO 日期字符串解析为年月日对象</td><td><code>{ year, month, day }</code>，非法输入返回 NaN</td></tr><tr><td><strong>renderDate</strong></td><td>渲染完整中文日期，可选仅显示到月份</td><td>“2025年12月19日” 或 “2025年12月”</td></tr><tr><td><strong>renderYear</strong></td><td>渲染仅年份</td><td>“2025年”</td></tr><tr><td><strong>renderYearRange</strong></td><td>渲染年份范围</td><td>“2025年 至 2030年”</td></tr><tr><td><strong>toTimeStr</strong></td><td>根据时分生成标准时间字符串</td><td><code>&quot;HH:MM&quot;</code>，自动补零</td></tr><tr><td><strong>parseTimeStr</strong></td><td>将时间字符串解析为时分对象</td><td><code>{ h, m }</code>，自动转换为数字</td></tr></tbody></table><h2 id="设计亮点" tabindex="-1">设计亮点 <a class="header-anchor" href="#设计亮点" aria-label="Permalink to “设计亮点”">​</a></h2><ul><li><strong>严格标准格式</strong>：日期产出标准 <code>&quot;YYYY-MM-DD&quot;</code>，时间产出 <code>&quot;HH:MM&quot;</code>，便于后端交互、排序、比较。</li><li><strong>自动补零统一</strong>：年月日时分均使用 <code>padStart</code> 确保两位显示，杜绝 “2025-1-1” 或 “9:5” 等非标准格式。</li><li><strong>安全解析</strong>：<code>isoToYMD</code> 与 <code>parseTimeStr</code> 对非法输入返回明确 NaN 或可判断结构，便于上游降级处理。</li><li><strong>纯函数无副作用</strong>：不依赖 Vue 或 DOM，可在任意环境安全调用。</li><li><strong>语义化中文展示</strong>：日期统一使用 “年”“月”“日”，提升中文场景阅读友好度。</li><li><strong>高复用性</strong>：覆盖从单一日期/时间到范围的所有常见展示与解析需求。</li></ul><h2 id="典型使用方式" tabindex="-1">典型使用方式 <a class="header-anchor" href="#典型使用方式" aria-label="Permalink to “典型使用方式”">​</a></h2><div class="language-typescript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes vitesse-light vitesse-dark" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;">import</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  toISOYMD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  isoToYMD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  renderDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  renderYearRange</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  toTimeStr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">  parseTimeStr</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;"> </span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> from</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">@/utils/datetime</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 日期</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">todayISO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> toISOYMD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">2025</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 12</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 19</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // &quot;2025-12-19&quot;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> year</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> month</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> day</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> isoToYMD</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">todayISO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">renderDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">todayISO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">              // &quot;2025年12月19日&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">renderDate</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">todayISO</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> true</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">        // &quot;2025年12月&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">renderYearRange</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2023-01-01</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2025-12-31</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // &quot;2023年 至 2025年&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">// 时间</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const </span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;">timeStr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> toTimeStr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;">9</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#2F798A;--shiki-dark:#4C9A91;"> 5</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;">    // &quot;09:05&quot;</span></span>
<span class="line"><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;">const </span><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> h</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span><span style="--shiki-light:#B07D48;--shiki-dark:#BD976A;"> m</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> }</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> =</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;"> parseTimeStr</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">(</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">14:30</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&#39;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">);</span><span style="--shiki-light:#A0ADA0;--shiki-dark:#758575DD;"> // { h: 14, m: 30 }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="设计价值" tabindex="-1">设计价值 <a class="header-anchor" href="#设计价值" aria-label="Permalink to “设计价值”">​</a></h2><p>这组工具函数是组件库时间表达一致性的隐形守护者：</p><p>彻底消除各处零散的日期时间拼接与解析代码 确保所有日期时间展示格式全局统一，避免斜杠、横线、补零不一致等问题 为后续国际化（i18n）预留切换空间（只需替换 render 系列函数） 与 DatePicker、TimePicker、Timeline、Form 等组件无缝协作，无需额外适配 极大提升代码可读性：renderDate(iso) + &#39; &#39; + toTimeStr(h, m) 比手动拼接更具语义</p><p>它们体现了我们对“细节统一”的极致追求：即使是最常见的时间展示与解析，也值得用最专注的工具去规范与守护。 用最统一的时间处理，呈现最清晰的日期与时刻表达。</p>`,18)])])}const y=i(e,[["render",h]]);export{g as __pageData,y as default};
